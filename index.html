<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Bergson and Friends</title>
<link rel="stylesheet" href="https://fjdaz.com/bergson/statics/style.css">
</style>
</head>
<script>
  // Fix dÃ©finitif pour tous les philosophes
  document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('input[type="image"]').forEach(btn => {
          btn.addEventListener('click', function(e) {
              e.preventDefault();
              
              const form = this.closest('form');
              const textarea = form.querySelector('textarea');
              const question = textarea.value.trim();
              
              if (!question) return;
              
              const philosopherId = form.closest('.philosopher').id;
              console.log(`Question pour ${philosopherId}:`, question);
              
              fetch(`/.netlify/functions/${philosopherId}`, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ question })
              })
              .then(r => r.json())
              .then(data => {
                  const history = form.parentElement.querySelector('.qa-history');
                  history.innerHTML += `
                      <div style="margin: 10px 0; padding: 10px; border-left: 3px solid #ccc;">
                          <div><strong>Q:</strong> ${question}</div>
                          <div><strong>R:</strong> ${data.answer}</div>
                      </div>
                  `;
                  textarea.value = '';
              })
              .catch(console.error);
          });
      });
  });
  </script>
  </body>
  </html>
<body>
<header> <img src="https://fjdaz.com/bergson/statics/img/BergsonAndFriendsLOGO.png"> </header>
<main>
  <section class="philosophers"> 
    
    <!-- Philosophe 1 -->
    <article class="philosopher" id="bergson">
      <button class="philosopher-trigger">
      <h2>Henri <span>Bergson</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Bergson.png" alt="Henri Bergson"> </button>
      <div class="dialogue" hidden>
        <form class="qa-form">
          <textarea id="question-bergson" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
          </input>
        </form>
        <div class="qa-history"></div>
      </div>
    </article>
    
    <!-- Philosophe 2 -->
    <article class="philosopher" id="kant">
      <button class="philosopher-trigger">
      <h2>Immanuel <span>Kant</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Kant.png" alt="Immanuel Kant"> </button>
      <div class="dialogue" hidden>
        <form class="qa-form">
          <textarea id="question-kant" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
          </input>
        </form>
        <div class="qa-history"></div>
      </div>
    </article>
    
    <!-- Philosophe 3 -->
    <article class="philosopher" id="spinoza">
      <button class="philosopher-trigger">
      <h2>Baruch <span>Spinoza</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Spinoza.png" alt="Baruch Spinoza"> </button>
      <div class="dialogue" hidden>
        <form class="qa-form">
          <textarea id="question-spinoza" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
          </input>
        </form>
        <div class="qa-history"></div>
      </div>
    </article>
  </section>
</main>
<script src="/static/app.js">
  
</script>">
</body>
</html>
