<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bergson and Friends</title>
<link rel="stylesheet" href="https://fjdaz.com/bergson/statics/style.css">
<link rel="stylesheet" href="https://fjdaz.com/bergson/statics/responsive.css" media="screen and (max-width: 768px)">
</style>
</head>
<script>
  // Fix définitif pour tous les philosophes
  document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('input[type="image"]').forEach(btn => {
          btn.addEventListener('click', function(e) {
              e.preventDefault();
              
              const form = this.closest('form');
              const textarea = form.querySelector('textarea');
              const question = textarea.value.trim();
              
              if (!question) return;
              
              const philosopherId = form.closest('.philosopher').id;
              console.log(`Question pour ${philosopherId}:`, question);
              
              fetch(`/.netlify/functions/${philosopherId}`, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ question })
              })
              .then(r => r.json())
              .then(data => {
                  const history = form.parentElement.querySelector('.qa-history');
                  history.innerHTML += `
                      <div style="margin: 10px 0; padding: 10px; border-left: 3px solid #ccc;">
                          <div><strong>Q:</strong> ${question}</div>
                          <div><strong>R:</strong> ${data.answer}</div>
                      </div>
                  `;
                  textarea.value = '';
              })
              .catch(console.error);
          });
      });
  });
  </script>
  </body>
  </html>
<body>
<header> <img src="https://fjdaz.com/bergson/statics/img/BergsonAndFriendsLOGO.png"> </header>
<main>
  <section class="philosophers"> 
    
    <!-- Philosophe 1 -->
    <article class="philosopher" id="bergson">
      <button class="philosopher-trigger">
      <h2>Henri <span>Bergson</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Bergson.png" alt="Henri Bergson"> </button>
      <div class="dialogue" hidden>
        <div class="qa-history"></div>
        <form class="qa-form">
          <textarea id="question-bergson" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
        </form>
      </div>
    </article>
    
    <!-- Philosophe 2 -->
    <article class="philosopher" id="kant">
      <button class="philosopher-trigger">
      <h2>Immanuel <span>Kant</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Kant.png" alt="Immanuel Kant"> </button>
      <div class="dialogue" hidden>
        <div class="qa-history"></div>
        <form class="qa-form">
          <textarea id="question-bergson" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
        </form>
      </div>
    </article>
    
    <!-- Philosophe 3 -->
    <article class="philosopher" id="spinoza">
      <button class="philosopher-trigger">
      <h2>Baruch <span>Spinoza</span></h2>
      <img src="https://fjdaz.com/bergson/statics/img/Spinoza.png" alt="Baruch Spinoza"> </button>
      <div class="dialogue" hidden>
        <div class="qa-history"></div>
        <form class="qa-form">
          <textarea id="question-bergson" name="question"></textarea>
          <input type="image" src="https://fjdaz.com/bergson/statics/img/Submit.png" alt="envoyer">
        </form>
      </div>
    </article>
  </section>
</main>
<!-- VERSION MOBILE DÉDIÉE - À ajouter après la version desktop -->

<div class="mobile-version" style="display: none;">
  <header>
    <img src="https://fjdaz.com/bergson/statics/img/BergsonAndFriendsLOGO.png" alt="Bergson and Friends">
  </header>
  
  <main>
    <!-- Philosophe actif par défaut : aucun -->
    <section class="mobile-philosophers">
      
      <!-- Bergson -->
      <article class="mobile-philosopher" id="mobile-bergson" data-philosopher="bergson">
        <button class="mobile-philosopher-trigger">
          <img src="https://fjdaz.com/bergson/statics/img/Bergson.png" alt="Henri Bergson">
          <span>Henri Bergson</span>
        </button>
      </article>
      
      <!-- Kant -->
      <article class="mobile-philosopher" id="mobile-kant" data-philosopher="kant">
        <button class="mobile-philosopher-trigger">
          <img src="https://fjdaz.com/bergson/statics/img/Kant.png" alt="Immanuel Kant">
          <span>Immanuel Kant</span>
        </button>
      </article>
      
      <!-- Spinoza -->
      <article class="mobile-philosopher" id="mobile-spinoza" data-philosopher="spinoza">
        <button class="mobile-philosopher-trigger">
          <img src="https://fjdaz.com/bergson/statics/img/Spinoza.png" alt="Baruch Spinoza">
          <span>Baruch Spinoza</span>
        </button>
      </article>
      
    </section>
    
    <!-- Zone conversation mobile - apparaît quand un philosophe est sélectionné -->
    <section class="mobile-conversation" id="mobile-conversation" style="display: none;">
      
      <!-- Philosophe actif en grand -->
      <div class="mobile-active-philosopher">
        <img id="mobile-active-img" src="" alt="">
        <h2 id="mobile-active-name"></h2>
        <p class="mobile-greeting">Bonjour, cher ami. De quel problème désirez-vous que nous nous entretenions ?</p>
      </div>
      
      <!-- Historique Q/A -->
      <div class="mobile-qa-history" id="mobile-qa-history">
        <!-- Les Q/A apparaîtront ici dynamiquement -->
      </div>
      
      <!-- Formulaire -->
      <form class="mobile-qa-form" id="mobile-qa-form">
        <textarea placeholder="Posez votre question..." rows="3"></textarea>
        <button type="submit">Envoyer</button>
      </form>
      
      <!-- Bouton retour à la liste -->
      <button class="mobile-back-button" id="mobile-back-button">← Choisir un autre philosophe</button>
      
    </section>
  </main>
</div>

<script src="https://fjdaz.com/bergson/statics/app.js">
  
</script>
</body>
</html>
